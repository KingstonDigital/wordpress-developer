!function(){"use strict";function e(){var e=document.querySelectorAll(".wp-block-telex-block-telex-kdm-premium-form"),a=Math.floor(Date.now()/1e3);e.forEach(function(e){var n=e.querySelector(".kdm-ajax-form");if(n){var o=n.querySelector('input[name="_kdm_loaded"]');o&&(o.value=String(a)),n.addEventListener("submit",function(a){a.preventDefault(),function(e,a){var n=a.querySelector(".kdm-lp-form-submit");if(!n.disabled){n.getAttribute("data-original-label")||n.setAttribute("data-original-label",n.innerHTML);var o=a.querySelector(".kdm-form-status"),s=e.getAttribute("data-success-message")||"Thank you! Your message has been sent successfully.";if(function(e){var t=e.querySelector('[name="first_name"]'),r=e.querySelector('[name="last_name"]'),a=e.querySelector('[name="email"]'),n=e.querySelector('[name="message"]');if(!(t.value.trim()&&r.value.trim()&&a.value.trim()&&n.value.trim()))return!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value.trim()))return!1;if(t.value.trim().length>100)return!1;if(r.value.trim().length>100)return!1;if(a.value.trim().length>254)return!1;if(n.value.trim().length>5e3)return!1;var o=e.querySelector('[name="phone"]');return!(o&&o.value.trim().length>30)}(a)){var u;n.disabled=!0,n.textContent="Sending…",(u=o)&&(u.style.display="none",u.textContent="",u.className="kdm-form-status");var i=new FormData(a);i.append("action","kdm_form_submit"),i.append("nonce","undefined"!=typeof kdmFormData?kdmFormData.nonce:"");var l="undefined"!=typeof kdmFormData?kdmFormData.ajaxUrl:"/wp-admin/admin-ajax.php",m=new XMLHttpRequest;m.open("POST",l,!0),m.onload=function(){var e;try{e=JSON.parse(m.responseText)}catch(e){return t(o,"An unexpected error occurred. Please try again.","error"),void r(n)}if(e.success){t(o,e.data.message||s,"success"),a.reset();var u=a.querySelector('input[name="_kdm_loaded"]');u&&(u.value=String(Math.floor(Date.now()/1e3)));var i=a.querySelector('input[name="_kdm_token"]');i&&(i.value=""),function(e){var t=e.querySelector(".cf-turnstile");t&&"undefined"!=typeof turnstile&&turnstile.reset(t)}(a),setTimeout(function(){r(n)},2e3)}else t(o,e.data.message||"Something went wrong. Please try again.","error"),r(n)},m.onerror=function(){t(o,"Network error. Please check your connection and try again.","error"),r(n)},m.send(i)}else t(o,"Please fill in all required fields correctly.","error")}}(e,n)})}})}function t(e,t,r){e&&(e.textContent=t,e.className="kdm-form-status",e.classList.add("success"===r?"kdm-status-success":"kdm-status-error"),e.style.display="block")}function r(e){e.disabled=!1,e.innerHTML=e.getAttribute("data-original-label")||"Send Message →"}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();